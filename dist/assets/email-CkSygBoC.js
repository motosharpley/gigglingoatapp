import{i as b,r as N,h as U,a as w,x as u,j as _,R as l,C as h,d as x,S as v,f as c,e as S,k,O as j,M as z,l as M,c as B}from"./index-lhkfOjOH.js";import{n as I,c as d,r as m,U as D}from"./if-defined-DRopHhnz.js";import"./index-Cu1umA83.js";import"./index-DJkbm_xX.js";import"./index-Dp4YtckF.js";import{e as H,n as q}from"./ref-75ksT_p0.js";import"./index-B9BcgYCy.js";import"./index-Cbfh8Gkp.js";import"./index-DWSawpCc.js";const K=b`
  :host {
    position: relative;
    display: inline-block;
  }

  input {
    width: 50px;
    height: 50px;
    background: var(--wui-color-gray-glass-010);
    border-radius: var(--wui-border-radius-xs);
    border: 1px solid var(--wui-color-gray-glass-005);
    font-family: var(--wui-font-family);
    font-size: var(--wui-font-size-large);
    font-weight: var(--wui-font-weight-regular);
    letter-spacing: var(--wui-letter-spacing-large);
    text-align: center;
    color: var(--wui-color-fg-100);
    caret-color: var(--wui-color-accent-100);
    transition:
      background-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      border-color var(--wui-ease-inout-power-1) var(--wui-duration-md),
      box-shadow var(--wui-ease-inout-power-1) var(--wui-duration-md);
    will-change: background-color, border-color, box-shadow;
    box-sizing: border-box;
    -webkit-appearance: none;
    -moz-appearance: textfield;
    padding: 0px;
  }

  input::-webkit-outer-spin-button,
  input::-webkit-inner-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  input[type='number'] {
    -moz-appearance: textfield;
  }

  input:disabled {
    cursor: not-allowed;
    border: 1px solid var(--wui-color-gray-glass-010);
    background: var(--wui-color-gray-glass-005);
  }

  input:focus:enabled {
    background-color: var(--wui-color-gray-glass-015);
    border: 1px solid var(--wui-color-accent-100);
    -webkit-box-shadow: 0px 0px 0px 4px var(--wui-box-shadow-blue);
    -moz-box-shadow: 0px 0px 0px 4px var(--wui-box-shadow-blue);
    box-shadow: 0px 0px 0px 4px var(--wui-box-shadow-blue);
  }

  @media (hover: hover) and (pointer: fine) {
    input:hover:enabled {
      background-color: var(--wui-color-gray-glass-015);
    }
  }
`;var T=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let g=class extends w{constructor(){super(...arguments),this.disabled=!1,this.value=""}render(){return u`<input
      type="number"
      maxlength="1"
      inputmode="numeric"
      autofocus
      ?disabled=${this.disabled}
      value=${this.value}
    /> `}};g.styles=[N,U,K];T([I({type:Boolean})],g.prototype,"disabled",void 0);T([I({type:String})],g.prototype,"value",void 0);g=T([d("wui-input-numeric")],g);const Y=b`
  :host {
    position: relative;
    display: block;
  }
`;var C=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let f=class extends w{constructor(){super(...arguments),this.length=6,this.otp="",this.values=Array.from({length:this.length}).map(()=>""),this.numerics=[],this.shouldInputBeEnabled=e=>this.values.slice(0,e).every(n=>n!==""),this.handleKeyDown=(e,t)=>{const n=e.target,o=this.getInputElement(n),i=["ArrowLeft","ArrowRight","Shift","Delete"];if(!o)return;i.includes(e.key)&&e.preventDefault();const r=o.selectionStart;switch(e.key){case"ArrowLeft":r&&o.setSelectionRange(r+1,r+1),this.focusInputField("prev",t);break;case"ArrowRight":this.focusInputField("next",t);break;case"Shift":this.focusInputField("next",t);break;case"Delete":o.value===""?this.focusInputField("prev",t):this.updateInput(o,t,"");break;case"Backspace":o.value===""?this.focusInputField("prev",t):this.updateInput(o,t,"");break}},this.focusInputField=(e,t)=>{if(e==="next"){const n=t+1;if(!this.shouldInputBeEnabled(n))return;const o=this.numerics[n<this.length?n:t],i=o?this.getInputElement(o):void 0;i&&(i.disabled=!1,i.focus())}if(e==="prev"){const n=t-1,o=this.numerics[n>-1?n:t],i=o?this.getInputElement(o):void 0;i&&i.focus()}}}firstUpdated(){this.otp&&(this.values=this.otp.split(""));const e=this.shadowRoot?.querySelectorAll("wui-input-numeric");e&&(this.numerics=Array.from(e)),this.numerics[0]?.focus()}render(){return u`
      <wui-flex gap="xxs" data-testid="wui-otp-input">
        ${Array.from({length:this.length}).map((e,t)=>u`
            <wui-input-numeric
              @input=${n=>this.handleInput(n,t)}
              @click=${n=>this.selectInput(n)}
              @keydown=${n=>this.handleKeyDown(n,t)}
              .disabled=${!this.shouldInputBeEnabled(t)}
              .value=${this.values[t]||""}
            >
            </wui-input-numeric>
          `)}
      </wui-flex>
    `}updateInput(e,t,n){const o=this.numerics[t],i=e||(o?this.getInputElement(o):void 0);i&&(i.value=n,this.values=this.values.map((r,s)=>s===t?n:r))}selectInput(e){const t=e.target;t&&this.getInputElement(t)?.select()}handleInput(e,t){const n=e.target,o=this.getInputElement(n);if(o){const i=o.value;e.inputType==="insertFromPaste"?this.handlePaste(o,i,t):D.isNumber(i)&&e.data?(this.updateInput(o,t,e.data),this.focusInputField("next",t)):this.updateInput(o,t,"")}this.dispatchInputChangeEvent()}handlePaste(e,t,n){const o=t[0];if(o&&D.isNumber(o)){this.updateInput(e,n,o);const r=t.substring(1);if(n+1<this.length&&r.length){const s=this.numerics[n+1],A=s?this.getInputElement(s):void 0;A&&this.handlePaste(A,r,n+1)}else this.focusInputField("next",n)}else this.updateInput(e,n,"")}getInputElement(e){return e.shadowRoot?.querySelector("input")?e.shadowRoot.querySelector("input"):null}dispatchInputChangeEvent(){const e=this.values.join("");this.dispatchEvent(new CustomEvent("inputChange",{detail:e,bubbles:!0,composed:!0}))}};f.styles=[N,Y];C([I({type:Number})],f.prototype,"length",void 0);C([I({type:String})],f.prototype,"otp",void 0);C([m()],f.prototype,"values",void 0);f=C([d("wui-otp")],f);const G=b`
  wui-loading-spinner {
    margin: 9px auto;
  }

  .email-display,
  .email-display wui-text {
    max-width: 100%;
  }
`;var O=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};const J=6;let p=class extends w{firstUpdated(){this.startOTPTimeout()}disconnectedCallback(){clearTimeout(this.OTPTimeout)}constructor(){super(),this.loading=!1,this.timeoutTimeLeft=_.getTimeToNextEmailLogin(),this.error="",this.otp="",this.email=l.state.data?.email,this.authConnector=h.getAuthConnector()}render(){if(!this.email)throw new Error("w3m-email-otp-widget: No email provided");const e=!!this.timeoutTimeLeft,t=this.getFooterLabels(e);return u`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["l","0","l","0"]}
        gap="l"
      >
        <wui-flex
          class="email-display"
          flexDirection="column"
          alignItems="center"
          .padding=${["0","xl","0","xl"]}
        >
          <wui-text variant="paragraph-400" color="fg-100" align="center">
            Enter the code we sent to
          </wui-text>
          <wui-text variant="paragraph-500" color="fg-100" lineClamp="1" align="center">
            ${this.email}
          </wui-text>
        </wui-flex>

        <wui-text variant="small-400" color="fg-200">The code expires in 20 minutes</wui-text>

        ${this.loading?u`<wui-loading-spinner size="xl" color="accent-100"></wui-loading-spinner>`:u` <wui-flex flexDirection="column" alignItems="center" gap="xs">
              <wui-otp
                dissabled
                length="6"
                @inputChange=${this.onOtpInputChange.bind(this)}
                .otp=${this.otp}
              ></wui-otp>
              ${this.error?u`
                    <wui-text variant="small-400" align="center" color="error-100">
                      ${this.error}. Try Again
                    </wui-text>
                  `:null}
            </wui-flex>`}

        <wui-flex alignItems="center" gap="xs">
          <wui-text variant="small-400" color="fg-200">${t.title}</wui-text>
          <wui-link @click=${this.onResendCode.bind(this)} .disabled=${e}>
            ${t.action}
          </wui-link>
        </wui-flex>
      </wui-flex>
    `}startOTPTimeout(){this.timeoutTimeLeft=_.getTimeToNextEmailLogin(),this.OTPTimeout=setInterval(()=>{this.timeoutTimeLeft>0?this.timeoutTimeLeft=_.getTimeToNextEmailLogin():clearInterval(this.OTPTimeout)},1e3)}async onOtpInputChange(e){try{this.loading||(this.otp=e.detail,this.authConnector&&this.otp.length===J&&(this.loading=!0,await this.onOtpSubmit?.(this.otp)))}catch(t){this.error=x.parseError(t),this.loading=!1}}async onResendCode(){try{if(this.onOtpResend){if(!this.loading&&!this.timeoutTimeLeft){if(this.error="",this.otp="",!h.getAuthConnector()||!this.email)throw new Error("w3m-email-otp-widget: Unable to resend email");this.loading=!0,await this.onOtpResend(this.email),this.startOTPTimeout(),v.showSuccess("Code email resent")}}else this.onStartOver&&this.onStartOver()}catch(e){v.showError(e)}finally{this.loading=!1}}getFooterLabels(e){return this.onStartOver?{title:"Something wrong?",action:`Try again ${e?`in ${this.timeoutTimeLeft}s`:""}`}:{title:"Didn't receive it?",action:`Resend ${e?`in ${this.timeoutTimeLeft}s`:"Code"}`}}};p.styles=G;O([m()],p.prototype,"loading",void 0);O([m()],p.prototype,"timeoutTimeLeft",void 0);O([m()],p.prototype,"error",void 0);p=O([d("w3m-email-otp-widget")],p);var Q=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let V=class extends p{constructor(){super(...arguments),this.onOtpSubmit=async e=>{try{if(this.authConnector){if(await this.authConnector.provider.connectOtp({otp:e}),c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),S.state.activeChain)await k.connectExternal(this.authConnector,S.state.activeChain);else throw new Error("Active chain is not set on ChainControll");c.sendEvent({type:"track",event:"CONNECT_SUCCESS",properties:{method:"email",name:this.authConnector.name||"Unknown"}}),j.state.siwx||z.close()}}catch(t){throw c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:x.parseError(t)}}),t}},this.onOtpResend=async e=>{this.authConnector&&(await this.authConnector.provider.connectEmail({email:e}),c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}))}}};V=Q([d("w3m-email-verify-otp-view")],V);const X=b`
  wui-icon-box {
    height: var(--wui-icon-box-size-xl);
    width: var(--wui-icon-box-size-xl);
  }
`;var F=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let y=class extends w{constructor(){super(),this.email=l.state.data?.email,this.authConnector=h.getAuthConnector(),this.loading=!1,this.listenForDeviceApproval()}render(){if(!this.email)throw new Error("w3m-email-verify-device-view: No email provided");if(!this.authConnector)throw new Error("w3m-email-verify-device-view: No auth connector provided");return u`
      <wui-flex
        flexDirection="column"
        alignItems="center"
        .padding=${["xxl","s","xxl","s"]}
        gap="l"
      >
        <wui-icon-box
          size="xl"
          iconcolor="accent-100"
          backgroundcolor="accent-100"
          icon="verify"
          background="opaque"
        ></wui-icon-box>

        <wui-flex flexDirection="column" alignItems="center" gap="s">
          <wui-flex flexDirection="column" alignItems="center">
            <wui-text variant="paragraph-400" color="fg-100">
              Approve the login link we sent to
            </wui-text>
            <wui-text variant="paragraph-400" color="fg-100"><b>${this.email}</b></wui-text>
          </wui-flex>

          <wui-text variant="small-400" color="fg-200" align="center">
            The code expires in 20 minutes
          </wui-text>

          <wui-flex alignItems="center" id="w3m-resend-section" gap="xs">
            <wui-text variant="small-400" color="fg-100" align="center">
              Didn't receive it?
            </wui-text>
            <wui-link @click=${this.onResendCode.bind(this)} .disabled=${this.loading}>
              Resend email
            </wui-link>
          </wui-flex>
        </wui-flex>
      </wui-flex>
    `}async listenForDeviceApproval(){if(this.authConnector)try{await this.authConnector.provider.connectDevice(),c.sendEvent({type:"track",event:"DEVICE_REGISTERED_FOR_EMAIL"}),c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_SENT"}),l.replace("EmailVerifyOtp",{email:this.email})}catch{l.goBack()}}async onResendCode(){try{if(!this.loading){if(!this.authConnector||!this.email)throw new Error("w3m-email-login-widget: Unable to resend email");this.loading=!0,await this.authConnector.provider.connectEmail({email:this.email}),this.listenForDeviceApproval(),v.showSuccess("Code email resent")}}catch(e){v.showError(e)}finally{this.loading=!1}}};y.styles=X;F([m()],y.prototype,"loading",void 0);y=F([d("w3m-email-verify-device-view")],y);const Z=b`
  wui-email-input {
    width: 100%;
  }

  form {
    width: 100%;
    display: block;
    position: relative;
  }
`;var $=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let E=class extends w{constructor(){super(...arguments),this.formRef=H(),this.initialEmail=l.state.data?.email??"",this.redirectView=l.state.data?.redirectView,this.email="",this.loading=!1}firstUpdated(){this.formRef.value?.addEventListener("keydown",e=>{e.key==="Enter"&&this.onSubmitEmail(e)})}render(){return u`
      <wui-flex flexDirection="column" padding="m" gap="m">
        <form ${q(this.formRef)} @submit=${this.onSubmitEmail.bind(this)}>
          <wui-email-input
            value=${this.initialEmail}
            .disabled=${this.loading}
            @inputChange=${this.onEmailInputChange.bind(this)}
          >
          </wui-email-input>
          <input type="submit" hidden />
        </form>
        ${this.buttonsTemplate()}
      </wui-flex>
    `}onEmailInputChange(e){this.email=e.detail}async onSubmitEmail(e){try{if(this.loading)return;this.loading=!0,e.preventDefault();const t=h.getAuthConnector();if(!t)throw new Error("w3m-update-email-wallet: Auth connector not found");const n=await t.provider.updateEmail({email:this.email});c.sendEvent({type:"track",event:"EMAIL_EDIT"}),n.action==="VERIFY_SECONDARY_OTP"?l.push("UpdateEmailSecondaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView}):l.push("UpdateEmailPrimaryOtp",{email:this.initialEmail,newEmail:this.email,redirectView:this.redirectView})}catch(t){v.showError(t),this.loading=!1}}buttonsTemplate(){const e=!this.loading&&this.email.length>3&&this.email!==this.initialEmail;return this.redirectView?u`
      <wui-flex gap="s">
        <wui-button size="md" variant="neutral" fullWidth @click=${l.goBack}>
          Cancel
        </wui-button>

        <wui-button
          size="md"
          variant="main"
          fullWidth
          @click=${this.onSubmitEmail.bind(this)}
          .disabled=${!e}
          .loading=${this.loading}
        >
          Save
        </wui-button>
      </wui-flex>
    `:u`
        <wui-button
          size="md"
          variant="main"
          fullWidth
          @click=${this.onSubmitEmail.bind(this)}
          .disabled=${!e}
          .loading=${this.loading}
        >
          Save
        </wui-button>
      `}};E.styles=Z;$([m()],E.prototype,"email",void 0);$([m()],E.prototype,"loading",void 0);E=$([d("w3m-update-email-wallet-view")],E);var ee=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let P=class extends p{constructor(){super(),this.email=l.state.data?.email,this.onOtpSubmit=async e=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailPrimaryOtp({otp:e}),c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),l.replace("UpdateEmailSecondaryOtp",l.state.data))}catch(t){throw c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:x.parseError(t)}}),t}},this.onStartOver=()=>{l.replace("UpdateEmailWallet",l.state.data)}}};P=ee([d("w3m-update-email-primary-otp-view")],P);var te=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let L=class extends p{constructor(){super(),this.email=l.state.data?.newEmail,this.redirectView=l.state.data?.redirectView,this.onOtpSubmit=async e=>{try{this.authConnector&&(await this.authConnector.provider.updateEmailSecondaryOtp({otp:e}),c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_PASS"}),this.redirectView&&l.reset(this.redirectView))}catch(t){throw c.sendEvent({type:"track",event:"EMAIL_VERIFICATION_CODE_FAIL",properties:{message:x.parseError(t)}}),t}},this.onStartOver=()=>{l.replace("UpdateEmailWallet",l.state.data)}}};L=te([d("w3m-update-email-secondary-otp-view")],L);var W=function(a,e,t,n){var o=arguments.length,i=o<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(a,e,t,n);else for(var s=a.length-1;s>=0;s--)(r=a[s])&&(i=(o<3?r(i):o>3?r(e,t,i):r(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i};let R=class extends w{constructor(){super(),this.authConnector=h.getAuthConnector(),this.isEmailEnabled=j.state.remoteFeatures?.email,this.isAuthEnabled=this.checkIfAuthEnabled(h.state.connectors),this.connectors=h.state.connectors,h.subscribeKey("connectors",e=>{this.connectors=e,this.isAuthEnabled=this.checkIfAuthEnabled(this.connectors)})}render(){if(!this.isEmailEnabled)throw new Error("w3m-email-login-view: Email is not enabled");if(!this.isAuthEnabled)throw new Error("w3m-email-login-view: No auth connector provided");return u`<wui-flex
      flexDirection="column"
      .padding=${["3xs","m","m","m"]}
      gap="l"
    >
      <w3m-email-login-widget></w3m-email-login-widget>
    </wui-flex> `}checkIfAuthEnabled(e){const t=e.filter(o=>o.type===M.CONNECTOR_TYPE_AUTH).map(o=>o.chain);return B.AUTH_CONNECTOR_SUPPORTED_CHAINS.some(o=>t.includes(o))}};W([m()],R.prototype,"connectors",void 0);R=W([d("w3m-email-login-view")],R);export{R as W3mEmailLoginView,y as W3mEmailVerifyDeviceView,V as W3mEmailVerifyOtpView,P as W3mUpdateEmailPrimaryOtpView,L as W3mUpdateEmailSecondaryOtpView,E as W3mUpdateEmailWalletView};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZW1haWwtQ2tTeWdCb0MuanMiLCJzb3VyY2VzIjpbIi4uLy4uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LXVpL2Rpc3QvZXNtL3NyYy9jb21wb3NpdGVzL3d1aS1pbnB1dC1udW1lcmljL3N0eWxlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LXVpL2Rpc3QvZXNtL3NyYy9jb21wb3NpdGVzL3d1aS1pbnB1dC1udW1lcmljL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtdWkvZGlzdC9lc20vc3JjL2NvbXBvc2l0ZXMvd3VpLW90cC9zdHlsZXMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC11aS9kaXN0L2VzbS9zcmMvY29tcG9zaXRlcy93dWktb3RwL2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2NhZmZvbGQtdWkvZGlzdC9lc20vc3JjL3V0aWxzL3czbS1lbWFpbC1vdHAtd2lkZ2V0L3N0eWxlcy5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LXNjYWZmb2xkLXVpL2Rpc3QvZXNtL3NyYy91dGlscy93M20tZW1haWwtb3RwLXdpZGdldC9pbmRleC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LXNjYWZmb2xkLXVpL2Rpc3QvZXNtL3NyYy92aWV3cy93M20tZW1haWwtdmVyaWZ5LW90cC12aWV3L2luZGV4LmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2NhZmZvbGQtdWkvZGlzdC9lc20vc3JjL3ZpZXdzL3czbS1lbWFpbC12ZXJpZnktZGV2aWNlLXZpZXcvc3R5bGVzLmpzIiwiLi4vLi4vbm9kZV9tb2R1bGVzL0ByZW93bi9hcHBraXQtc2NhZmZvbGQtdWkvZGlzdC9lc20vc3JjL3ZpZXdzL3czbS1lbWFpbC12ZXJpZnktZGV2aWNlLXZpZXcvaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zY2FmZm9sZC11aS9kaXN0L2VzbS9zcmMvdmlld3MvdzNtLXVwZGF0ZS1lbWFpbC13YWxsZXQtdmlldy9zdHlsZXMuanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zY2FmZm9sZC11aS9kaXN0L2VzbS9zcmMvdmlld3MvdzNtLXVwZGF0ZS1lbWFpbC13YWxsZXQtdmlldy9pbmRleC5qcyIsIi4uLy4uL25vZGVfbW9kdWxlcy9AcmVvd24vYXBwa2l0LXNjYWZmb2xkLXVpL2Rpc3QvZXNtL3NyYy92aWV3cy93M20tdXBkYXRlLWVtYWlsLXByaW1hcnktb3RwLXZpZXcvaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zY2FmZm9sZC11aS9kaXN0L2VzbS9zcmMvdmlld3MvdzNtLXVwZGF0ZS1lbWFpbC1zZWNvbmRhcnktb3RwLXZpZXcvaW5kZXguanMiLCIuLi8uLi9ub2RlX21vZHVsZXMvQHJlb3duL2FwcGtpdC1zY2FmZm9sZC11aS9kaXN0L2VzbS9zcmMvdmlld3MvdzNtLWVtYWlsLWxvZ2luLXZpZXcvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3NzIH0gZnJvbSAnbGl0JztcbmV4cG9ydCBkZWZhdWx0IGNzcyBgXG4gIDpob3N0IHtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xuICB9XG5cbiAgaW5wdXQge1xuICAgIHdpZHRoOiA1MHB4O1xuICAgIGhlaWdodDogNTBweDtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS13dWktY29sb3ItZ3JheS1nbGFzcy0wMTApO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLXd1aS1ib3JkZXItcmFkaXVzLXhzKTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS13dWktY29sb3ItZ3JheS1nbGFzcy0wMDUpO1xuICAgIGZvbnQtZmFtaWx5OiB2YXIoLS13dWktZm9udC1mYW1pbHkpO1xuICAgIGZvbnQtc2l6ZTogdmFyKC0td3VpLWZvbnQtc2l6ZS1sYXJnZSk7XG4gICAgZm9udC13ZWlnaHQ6IHZhcigtLXd1aS1mb250LXdlaWdodC1yZWd1bGFyKTtcbiAgICBsZXR0ZXItc3BhY2luZzogdmFyKC0td3VpLWxldHRlci1zcGFjaW5nLWxhcmdlKTtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6IHZhcigtLXd1aS1jb2xvci1mZy0xMDApO1xuICAgIGNhcmV0LWNvbG9yOiB2YXIoLS13dWktY29sb3ItYWNjZW50LTEwMCk7XG4gICAgdHJhbnNpdGlvbjpcbiAgICAgIGJhY2tncm91bmQtY29sb3IgdmFyKC0td3VpLWVhc2UtaW5vdXQtcG93ZXItMSkgdmFyKC0td3VpLWR1cmF0aW9uLW1kKSxcbiAgICAgIGJvcmRlci1jb2xvciB2YXIoLS13dWktZWFzZS1pbm91dC1wb3dlci0xKSB2YXIoLS13dWktZHVyYXRpb24tbWQpLFxuICAgICAgYm94LXNoYWRvdyB2YXIoLS13dWktZWFzZS1pbm91dC1wb3dlci0xKSB2YXIoLS13dWktZHVyYXRpb24tbWQpO1xuICAgIHdpbGwtY2hhbmdlOiBiYWNrZ3JvdW5kLWNvbG9yLCBib3JkZXItY29sb3IsIGJveC1zaGFkb3c7XG4gICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgLW1vei1hcHBlYXJhbmNlOiB0ZXh0ZmllbGQ7XG4gICAgcGFkZGluZzogMHB4O1xuICB9XG5cbiAgaW5wdXQ6Oi13ZWJraXQtb3V0ZXItc3Bpbi1idXR0b24sXG4gIGlucHV0Ojotd2Via2l0LWlubmVyLXNwaW4tYnV0dG9uIHtcbiAgICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gICAgbWFyZ2luOiAwO1xuICB9XG5cbiAgaW5wdXRbdHlwZT0nbnVtYmVyJ10ge1xuICAgIC1tb3otYXBwZWFyYW5jZTogdGV4dGZpZWxkO1xuICB9XG5cbiAgaW5wdXQ6ZGlzYWJsZWQge1xuICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0td3VpLWNvbG9yLWdyYXktZ2xhc3MtMDEwKTtcbiAgICBiYWNrZ3JvdW5kOiB2YXIoLS13dWktY29sb3ItZ3JheS1nbGFzcy0wMDUpO1xuICB9XG5cbiAgaW5wdXQ6Zm9jdXM6ZW5hYmxlZCB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td3VpLWNvbG9yLWdyYXktZ2xhc3MtMDE1KTtcbiAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS13dWktY29sb3ItYWNjZW50LTEwMCk7XG4gICAgLXdlYmtpdC1ib3gtc2hhZG93OiAwcHggMHB4IDBweCA0cHggdmFyKC0td3VpLWJveC1zaGFkb3ctYmx1ZSk7XG4gICAgLW1vei1ib3gtc2hhZG93OiAwcHggMHB4IDBweCA0cHggdmFyKC0td3VpLWJveC1zaGFkb3ctYmx1ZSk7XG4gICAgYm94LXNoYWRvdzogMHB4IDBweCAwcHggNHB4IHZhcigtLXd1aS1ib3gtc2hhZG93LWJsdWUpO1xuICB9XG5cbiAgQG1lZGlhIChob3ZlcjogaG92ZXIpIGFuZCAocG9pbnRlcjogZmluZSkge1xuICAgIGlucHV0OmhvdmVyOmVuYWJsZWQge1xuICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td3VpLWNvbG9yLWdyYXktZ2xhc3MtMDE1KTtcbiAgICB9XG4gIH1cbmA7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1zdHlsZXMuanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBwcm9wZXJ0eSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IGVsZW1lbnRTdHlsZXMsIHJlc2V0U3R5bGVzIH0gZnJvbSAnLi4vLi4vdXRpbHMvVGhlbWVVdGlsLmpzJztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQgfSBmcm9tICcuLi8uLi91dGlscy9XZWJDb21wb25lbnRzVXRpbC5qcyc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vc3R5bGVzLmpzJztcbmxldCBXdWlJbnB1dE51bWVyaWMgPSBjbGFzcyBXdWlJbnB1dE51bWVyaWMgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLnZhbHVlID0gJyc7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIGh0bWwgYDxpbnB1dFxuICAgICAgdHlwZT1cIm51bWJlclwiXG4gICAgICBtYXhsZW5ndGg9XCIxXCJcbiAgICAgIGlucHV0bW9kZT1cIm51bWVyaWNcIlxuICAgICAgYXV0b2ZvY3VzXG4gICAgICA/ZGlzYWJsZWQ9JHt0aGlzLmRpc2FibGVkfVxuICAgICAgdmFsdWU9JHt0aGlzLnZhbHVlfVxuICAgIC8+IGA7XG4gICAgfVxufTtcbld1aUlucHV0TnVtZXJpYy5zdHlsZXMgPSBbcmVzZXRTdHlsZXMsIGVsZW1lbnRTdHlsZXMsIHN0eWxlc107XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IHR5cGU6IEJvb2xlYW4gfSlcbl0sIFd1aUlucHV0TnVtZXJpYy5wcm90b3R5cGUsIFwiZGlzYWJsZWRcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXG5dLCBXdWlJbnB1dE51bWVyaWMucHJvdG90eXBlLCBcInZhbHVlXCIsIHZvaWQgMCk7XG5XdWlJbnB1dE51bWVyaWMgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCd3dWktaW5wdXQtbnVtZXJpYycpXG5dLCBXdWlJbnB1dE51bWVyaWMpO1xuZXhwb3J0IHsgV3VpSW5wdXROdW1lcmljIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBjc3MgfSBmcm9tICdsaXQnO1xuZXhwb3J0IGRlZmF1bHQgY3NzIGBcbiAgOmhvc3Qge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBkaXNwbGF5OiBibG9jaztcbiAgfVxuYDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0eWxlcy5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sIH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IHByb3BlcnR5LCBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCAnLi4vLi4vbGF5b3V0L3d1aS1mbGV4L2luZGV4LmpzJztcbmltcG9ydCB7IHJlc2V0U3R5bGVzIH0gZnJvbSAnLi4vLi4vdXRpbHMvVGhlbWVVdGlsLmpzJztcbmltcG9ydCB7IFVpSGVscGVyVXRpbCB9IGZyb20gJy4uLy4uL3V0aWxzL1VpSGVscGVyVXRpbC5qcyc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnLi4vLi4vdXRpbHMvV2ViQ29tcG9uZW50c1V0aWwuanMnO1xuaW1wb3J0ICcuLi93dWktaW5wdXQtbnVtZXJpYy9pbmRleC5qcyc7XG5pbXBvcnQgeyBXdWlJbnB1dE51bWVyaWMgfSBmcm9tICcuLi93dWktaW5wdXQtbnVtZXJpYy9pbmRleC5qcyc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vc3R5bGVzLmpzJztcbmxldCBXdWlPdHAgPSBjbGFzcyBXdWlPdHAgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5sZW5ndGggPSA2O1xuICAgICAgICB0aGlzLm90cCA9ICcnO1xuICAgICAgICB0aGlzLnZhbHVlcyA9IEFycmF5LmZyb20oeyBsZW5ndGg6IHRoaXMubGVuZ3RoIH0pLm1hcCgoKSA9PiAnJyk7XG4gICAgICAgIHRoaXMubnVtZXJpY3MgPSBbXTtcbiAgICAgICAgdGhpcy5zaG91bGRJbnB1dEJlRW5hYmxlZCA9IChpbmRleCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNJbnB1dHMgPSB0aGlzLnZhbHVlcy5zbGljZSgwLCBpbmRleCk7XG4gICAgICAgICAgICByZXR1cm4gcHJldmlvdXNJbnB1dHMuZXZlcnkoaW5wdXQgPT4gaW5wdXQgIT09ICcnKTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlEb3duID0gKGUsIGluZGV4KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5nZXRJbnB1dEVsZW1lbnQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgICAgIGNvbnN0IGtleUFyciA9IFsnQXJyb3dMZWZ0JywgJ0Fycm93UmlnaHQnLCAnU2hpZnQnLCAnRGVsZXRlJ107XG4gICAgICAgICAgICBpZiAoIWlucHV0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleUFyci5pbmNsdWRlcyhlLmtleSkpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q2FyZXRQb3MgPSBpbnB1dC5zZWxlY3Rpb25TdGFydDtcbiAgICAgICAgICAgIHN3aXRjaCAoZS5rZXkpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdBcnJvd0xlZnQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENhcmV0UG9zKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbnB1dC5zZXRTZWxlY3Rpb25SYW5nZShjdXJyZW50Q2FyZXRQb3MgKyAxLCBjdXJyZW50Q2FyZXRQb3MgKyAxKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzSW5wdXRGaWVsZCgncHJldicsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQXJyb3dSaWdodCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNJbnB1dEZpZWxkKCduZXh0JywgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdTaGlmdCc6XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNJbnB1dEZpZWxkKCduZXh0JywgaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdEZWxldGUnOlxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5wdXQudmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmZvY3VzSW5wdXRGaWVsZCgncHJldicsIGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXQoaW5wdXQsIGluZGV4LCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnQmFja3NwYWNlJzpcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnZhbHVlID09PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5mb2N1c0lucHV0RmllbGQoJ3ByZXYnLCBpbmRleCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KGlucHV0LCBpbmRleCwgJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZm9jdXNJbnB1dEZpZWxkID0gKGRpciwgaW5kZXgpID0+IHtcbiAgICAgICAgICAgIGlmIChkaXIgPT09ICduZXh0Jykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJbmRleCA9IGluZGV4ICsgMTtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuc2hvdWxkSW5wdXRCZUVuYWJsZWQobmV4dEluZGV4KSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNvbnN0IG51bWVyaWMgPSB0aGlzLm51bWVyaWNzW25leHRJbmRleCA8IHRoaXMubGVuZ3RoID8gbmV4dEluZGV4IDogaW5kZXhdO1xuICAgICAgICAgICAgICAgIGNvbnN0IGlucHV0ID0gbnVtZXJpYyA/IHRoaXMuZ2V0SW5wdXRFbGVtZW50KG51bWVyaWMpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBpbnB1dC5mb2N1cygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChkaXIgPT09ICdwcmV2Jykge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5leHRJbmRleCA9IGluZGV4IC0gMTtcbiAgICAgICAgICAgICAgICBjb25zdCBudW1lcmljID0gdGhpcy5udW1lcmljc1tuZXh0SW5kZXggPiAtMSA/IG5leHRJbmRleCA6IGluZGV4XTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbnB1dCA9IG51bWVyaWMgPyB0aGlzLmdldElucHV0RWxlbWVudChudW1lcmljKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAoaW5wdXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaW5wdXQuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfVxuICAgIGZpcnN0VXBkYXRlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3RwKSB7XG4gICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHRoaXMub3RwLnNwbGl0KCcnKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBudW1lcmljRWxlbWVudHMgPSB0aGlzLnNoYWRvd1Jvb3Q/LnF1ZXJ5U2VsZWN0b3JBbGwoJ3d1aS1pbnB1dC1udW1lcmljJyk7XG4gICAgICAgIGlmIChudW1lcmljRWxlbWVudHMpIHtcbiAgICAgICAgICAgIHRoaXMubnVtZXJpY3MgPSBBcnJheS5mcm9tKG51bWVyaWNFbGVtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5udW1lcmljc1swXT8uZm9jdXMoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICByZXR1cm4gaHRtbCBgXG4gICAgICA8d3VpLWZsZXggZ2FwPVwieHhzXCIgZGF0YS10ZXN0aWQ9XCJ3dWktb3RwLWlucHV0XCI+XG4gICAgICAgICR7QXJyYXkuZnJvbSh7IGxlbmd0aDogdGhpcy5sZW5ndGggfSkubWFwKChfLCBpbmRleCkgPT4gaHRtbCBgXG4gICAgICAgICAgICA8d3VpLWlucHV0LW51bWVyaWNcbiAgICAgICAgICAgICAgQGlucHV0PSR7KGUpID0+IHRoaXMuaGFuZGxlSW5wdXQoZSwgaW5kZXgpfVxuICAgICAgICAgICAgICBAY2xpY2s9JHsoZSkgPT4gdGhpcy5zZWxlY3RJbnB1dChlKX1cbiAgICAgICAgICAgICAgQGtleWRvd249JHsoZSkgPT4gdGhpcy5oYW5kbGVLZXlEb3duKGUsIGluZGV4KX1cbiAgICAgICAgICAgICAgLmRpc2FibGVkPSR7IXRoaXMuc2hvdWxkSW5wdXRCZUVuYWJsZWQoaW5kZXgpfVxuICAgICAgICAgICAgICAudmFsdWU9JHt0aGlzLnZhbHVlc1tpbmRleF0gfHwgJyd9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICA8L3d1aS1pbnB1dC1udW1lcmljPlxuICAgICAgICAgIGApfVxuICAgICAgPC93dWktZmxleD5cbiAgICBgO1xuICAgIH1cbiAgICB1cGRhdGVJbnB1dChlbGVtZW50LCBpbmRleCwgdmFsdWUpIHtcbiAgICAgICAgY29uc3QgbnVtZXJpYyA9IHRoaXMubnVtZXJpY3NbaW5kZXhdO1xuICAgICAgICBjb25zdCBpbnB1dCA9IGVsZW1lbnQgfHwgKG51bWVyaWMgPyB0aGlzLmdldElucHV0RWxlbWVudChudW1lcmljKSA6IHVuZGVmaW5lZCk7XG4gICAgICAgIGlmIChpbnB1dCkge1xuICAgICAgICAgICAgaW5wdXQudmFsdWUgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudmFsdWVzID0gdGhpcy52YWx1ZXMubWFwKCh2YWwsIGkpID0+IChpID09PSBpbmRleCA/IHZhbHVlIDogdmFsKSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2VsZWN0SW5wdXQoZSkge1xuICAgICAgICBjb25zdCB0YXJnZXRFbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgIGlmICh0YXJnZXRFbGVtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSB0aGlzLmdldElucHV0RWxlbWVudCh0YXJnZXRFbGVtZW50KTtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudD8uc2VsZWN0KCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaGFuZGxlSW5wdXQoZSwgaW5kZXgpIHtcbiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gZS50YXJnZXQ7XG4gICAgICAgIGNvbnN0IGlucHV0ID0gdGhpcy5nZXRJbnB1dEVsZW1lbnQoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgaWYgKGlucHV0KSB7XG4gICAgICAgICAgICBjb25zdCBpbnB1dFZhbHVlID0gaW5wdXQudmFsdWU7XG4gICAgICAgICAgICBpZiAoZS5pbnB1dFR5cGUgPT09ICdpbnNlcnRGcm9tUGFzdGUnKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVQYXN0ZShpbnB1dCwgaW5wdXRWYWx1ZSwgaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaXNWYWxpZCA9IFVpSGVscGVyVXRpbC5pc051bWJlcihpbnB1dFZhbHVlKTtcbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZCAmJiBlLmRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dChpbnB1dCwgaW5kZXgsIGUuZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9jdXNJbnB1dEZpZWxkKCduZXh0JywgaW5kZXgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVJbnB1dChpbnB1dCwgaW5kZXgsICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kaXNwYXRjaElucHV0Q2hhbmdlRXZlbnQoKTtcbiAgICB9XG4gICAgaGFuZGxlUGFzdGUoaW5wdXQsIGlucHV0VmFsdWUsIGluZGV4KSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gaW5wdXRWYWx1ZVswXTtcbiAgICAgICAgY29uc3QgaXNWYWxpZCA9IHZhbHVlICYmIFVpSGVscGVyVXRpbC5pc051bWJlcih2YWx1ZSk7XG4gICAgICAgIGlmIChpc1ZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZUlucHV0KGlucHV0LCBpbmRleCwgdmFsdWUpO1xuICAgICAgICAgICAgY29uc3QgaW5wdXRTdHJpbmcgPSBpbnB1dFZhbHVlLnN1YnN0cmluZygxKTtcbiAgICAgICAgICAgIGlmIChpbmRleCArIDEgPCB0aGlzLmxlbmd0aCAmJiBpbnB1dFN0cmluZy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0TnVtZXJpYyA9IHRoaXMubnVtZXJpY3NbaW5kZXggKyAxXTtcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0SW5wdXQgPSBuZXh0TnVtZXJpYyA/IHRoaXMuZ2V0SW5wdXRFbGVtZW50KG5leHROdW1lcmljKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICBpZiAobmV4dElucHV0KSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlUGFzdGUobmV4dElucHV0LCBpbnB1dFN0cmluZywgaW5kZXggKyAxKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICB0aGlzLmZvY3VzSW5wdXRGaWVsZCgnbmV4dCcsIGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlSW5wdXQoaW5wdXQsIGluZGV4LCAnJyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZ2V0SW5wdXRFbGVtZW50KGVsKSB7XG4gICAgICAgIGlmIChlbC5zaGFkb3dSb290Py5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwuc2hhZG93Um9vdC5xdWVyeVNlbGVjdG9yKCdpbnB1dCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBkaXNwYXRjaElucHV0Q2hhbmdlRXZlbnQoKSB7XG4gICAgICAgIGNvbnN0IHZhbHVlID0gdGhpcy52YWx1ZXMuam9pbignJyk7XG4gICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoJ2lucHV0Q2hhbmdlJywge1xuICAgICAgICAgICAgZGV0YWlsOiB2YWx1ZSxcbiAgICAgICAgICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICBjb21wb3NlZDogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgfVxufTtcbld1aU90cC5zdHlsZXMgPSBbcmVzZXRTdHlsZXMsIHN0eWxlc107XG5fX2RlY29yYXRlKFtcbiAgICBwcm9wZXJ0eSh7IHR5cGU6IE51bWJlciB9KVxuXSwgV3VpT3RwLnByb3RvdHlwZSwgXCJsZW5ndGhcIiwgdm9pZCAwKTtcbl9fZGVjb3JhdGUoW1xuICAgIHByb3BlcnR5KHsgdHlwZTogU3RyaW5nIH0pXG5dLCBXdWlPdHAucHJvdG90eXBlLCBcIm90cFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgc3RhdGUoKVxuXSwgV3VpT3RwLnByb3RvdHlwZSwgXCJ2YWx1ZXNcIiwgdm9pZCAwKTtcbld1aU90cCA9IF9fZGVjb3JhdGUoW1xuICAgIGN1c3RvbUVsZW1lbnQoJ3d1aS1vdHAnKVxuXSwgV3VpT3RwKTtcbmV4cG9ydCB7IFd1aU90cCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwiaW1wb3J0IHsgY3NzIH0gZnJvbSAnbGl0JztcbmV4cG9ydCBkZWZhdWx0IGNzcyBgXG4gIHd1aS1sb2FkaW5nLXNwaW5uZXIge1xuICAgIG1hcmdpbjogOXB4IGF1dG87XG4gIH1cblxuICAuZW1haWwtZGlzcGxheSxcbiAgLmVtYWlsLWRpc3BsYXkgd3VpLXRleHQge1xuICAgIG1heC13aWR0aDogMTAwJTtcbiAgfVxuYDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0eWxlcy5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sIH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgQ29ubmVjdG9yQ29udHJvbGxlciwgQ29yZUhlbHBlclV0aWwsIFJvdXRlckNvbnRyb2xsZXIsIFNuYWNrQ29udHJvbGxlciB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCB9IGZyb20gJ0ByZW93bi9hcHBraXQtdWknO1xuaW1wb3J0ICdAcmVvd24vYXBwa2l0LXVpL3d1aS1mbGV4JztcbmltcG9ydCAnQHJlb3duL2FwcGtpdC11aS93dWktbGluayc7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLWxvYWRpbmctc3Bpbm5lcic7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLW90cCc7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLXRleHQnO1xuaW1wb3J0IHsgVzNtRnJhbWVIZWxwZXJzIH0gZnJvbSAnQHJlb3duL2FwcGtpdC13YWxsZXQnO1xuaW1wb3J0IHN0eWxlcyBmcm9tICcuL3N0eWxlcy5qcyc7XG5jb25zdCBPVFBfTEVOR1RIID0gNjtcbmxldCBXM21FbWFpbE90cFdpZGdldCA9IGNsYXNzIFczbUVtYWlsT3RwV2lkZ2V0IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgZmlyc3RVcGRhdGVkKCkge1xuICAgICAgICB0aGlzLnN0YXJ0T1RQVGltZW91dCgpO1xuICAgIH1cbiAgICBkaXNjb25uZWN0ZWRDYWxsYmFjaygpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuT1RQVGltZW91dCk7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy50aW1lb3V0VGltZUxlZnQgPSBXM21GcmFtZUhlbHBlcnMuZ2V0VGltZVRvTmV4dEVtYWlsTG9naW4oKTtcbiAgICAgICAgdGhpcy5lcnJvciA9ICcnO1xuICAgICAgICB0aGlzLm90cCA9ICcnO1xuICAgICAgICB0aGlzLmVtYWlsID0gUm91dGVyQ29udHJvbGxlci5zdGF0ZS5kYXRhPy5lbWFpbDtcbiAgICAgICAgdGhpcy5hdXRoQ29ubmVjdG9yID0gQ29ubmVjdG9yQ29udHJvbGxlci5nZXRBdXRoQ29ubmVjdG9yKCk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgaWYgKCF0aGlzLmVtYWlsKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3czbS1lbWFpbC1vdHAtd2lkZ2V0OiBObyBlbWFpbCBwcm92aWRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGlzUmVzZW5kRGlzYWJsZWQgPSBCb29sZWFuKHRoaXMudGltZW91dFRpbWVMZWZ0KTtcbiAgICAgICAgY29uc3QgZm9vdGVyTGFiZWxzID0gdGhpcy5nZXRGb290ZXJMYWJlbHMoaXNSZXNlbmREaXNhYmxlZCk7XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgIDx3dWktZmxleFxuICAgICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgICAgYWxpZ25JdGVtcz1cImNlbnRlclwiXG4gICAgICAgIC5wYWRkaW5nPSR7WydsJywgJzAnLCAnbCcsICcwJ119XG4gICAgICAgIGdhcD1cImxcIlxuICAgICAgPlxuICAgICAgICA8d3VpLWZsZXhcbiAgICAgICAgICBjbGFzcz1cImVtYWlsLWRpc3BsYXlcIlxuICAgICAgICAgIGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIlxuICAgICAgICAgIGFsaWduSXRlbXM9XCJjZW50ZXJcIlxuICAgICAgICAgIC5wYWRkaW5nPSR7WycwJywgJ3hsJywgJzAnLCAneGwnXX1cbiAgICAgICAgPlxuICAgICAgICAgIDx3dWktdGV4dCB2YXJpYW50PVwicGFyYWdyYXBoLTQwMFwiIGNvbG9yPVwiZmctMTAwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgIEVudGVyIHRoZSBjb2RlIHdlIHNlbnQgdG9cbiAgICAgICAgICA8L3d1aS10ZXh0PlxuICAgICAgICAgIDx3dWktdGV4dCB2YXJpYW50PVwicGFyYWdyYXBoLTUwMFwiIGNvbG9yPVwiZmctMTAwXCIgbGluZUNsYW1wPVwiMVwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICAke3RoaXMuZW1haWx9XG4gICAgICAgICAgPC93dWktdGV4dD5cbiAgICAgICAgPC93dWktZmxleD5cblxuICAgICAgICA8d3VpLXRleHQgdmFyaWFudD1cInNtYWxsLTQwMFwiIGNvbG9yPVwiZmctMjAwXCI+VGhlIGNvZGUgZXhwaXJlcyBpbiAyMCBtaW51dGVzPC93dWktdGV4dD5cblxuICAgICAgICAke3RoaXMubG9hZGluZ1xuICAgICAgICAgICAgPyBodG1sIGA8d3VpLWxvYWRpbmctc3Bpbm5lciBzaXplPVwieGxcIiBjb2xvcj1cImFjY2VudC0xMDBcIj48L3d1aS1sb2FkaW5nLXNwaW5uZXI+YFxuICAgICAgICAgICAgOiBodG1sIGAgPHd1aS1mbGV4IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCIgZ2FwPVwieHNcIj5cbiAgICAgICAgICAgICAgPHd1aS1vdHBcbiAgICAgICAgICAgICAgICBkaXNzYWJsZWRcbiAgICAgICAgICAgICAgICBsZW5ndGg9XCI2XCJcbiAgICAgICAgICAgICAgICBAaW5wdXRDaGFuZ2U9JHt0aGlzLm9uT3RwSW5wdXRDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICAgICAgICAub3RwPSR7dGhpcy5vdHB9XG4gICAgICAgICAgICAgID48L3d1aS1vdHA+XG4gICAgICAgICAgICAgICR7dGhpcy5lcnJvclxuICAgICAgICAgICAgICAgID8gaHRtbCBgXG4gICAgICAgICAgICAgICAgICAgIDx3dWktdGV4dCB2YXJpYW50PVwic21hbGwtNDAwXCIgYWxpZ249XCJjZW50ZXJcIiBjb2xvcj1cImVycm9yLTEwMFwiPlxuICAgICAgICAgICAgICAgICAgICAgICR7dGhpcy5lcnJvcn0uIFRyeSBBZ2FpblxuICAgICAgICAgICAgICAgICAgICA8L3d1aS10ZXh0PlxuICAgICAgICAgICAgICAgICAgYFxuICAgICAgICAgICAgICAgIDogbnVsbH1cbiAgICAgICAgICAgIDwvd3VpLWZsZXg+YH1cblxuICAgICAgICA8d3VpLWZsZXggYWxpZ25JdGVtcz1cImNlbnRlclwiIGdhcD1cInhzXCI+XG4gICAgICAgICAgPHd1aS10ZXh0IHZhcmlhbnQ9XCJzbWFsbC00MDBcIiBjb2xvcj1cImZnLTIwMFwiPiR7Zm9vdGVyTGFiZWxzLnRpdGxlfTwvd3VpLXRleHQ+XG4gICAgICAgICAgPHd1aS1saW5rIEBjbGljaz0ke3RoaXMub25SZXNlbmRDb2RlLmJpbmQodGhpcyl9IC5kaXNhYmxlZD0ke2lzUmVzZW5kRGlzYWJsZWR9PlxuICAgICAgICAgICAgJHtmb290ZXJMYWJlbHMuYWN0aW9ufVxuICAgICAgICAgIDwvd3VpLWxpbms+XG4gICAgICAgIDwvd3VpLWZsZXg+XG4gICAgICA8L3d1aS1mbGV4PlxuICAgIGA7XG4gICAgfVxuICAgIHN0YXJ0T1RQVGltZW91dCgpIHtcbiAgICAgICAgdGhpcy50aW1lb3V0VGltZUxlZnQgPSBXM21GcmFtZUhlbHBlcnMuZ2V0VGltZVRvTmV4dEVtYWlsTG9naW4oKTtcbiAgICAgICAgdGhpcy5PVFBUaW1lb3V0ID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKHRoaXMudGltZW91dFRpbWVMZWZ0ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMudGltZW91dFRpbWVMZWZ0ID0gVzNtRnJhbWVIZWxwZXJzLmdldFRpbWVUb05leHRFbWFpbExvZ2luKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuT1RQVGltZW91dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDApO1xuICAgIH1cbiAgICBhc3luYyBvbk90cElucHV0Q2hhbmdlKGV2ZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAoIXRoaXMubG9hZGluZykge1xuICAgICAgICAgICAgICAgIHRoaXMub3RwID0gZXZlbnQuZGV0YWlsO1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dGhDb25uZWN0b3IgJiYgdGhpcy5vdHAubGVuZ3RoID09PSBPVFBfTEVOR1RIKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25PdHBTdWJtaXQ/Lih0aGlzLm90cCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgdGhpcy5lcnJvciA9IENvcmVIZWxwZXJVdGlsLnBhcnNlRXJyb3IoZXJyb3IpO1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SZXNlbmRDb2RlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHRoaXMub25PdHBSZXNlbmQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMubG9hZGluZyAmJiAhdGhpcy50aW1lb3V0VGltZUxlZnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lcnJvciA9ICcnO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm90cCA9ICcnO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBhdXRoQ29ubmVjdG9yID0gQ29ubmVjdG9yQ29udHJvbGxlci5nZXRBdXRoQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghYXV0aENvbm5lY3RvciB8fCAhdGhpcy5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd3M20tZW1haWwtb3RwLXdpZGdldDogVW5hYmxlIHRvIHJlc2VuZCBlbWFpbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25PdHBSZXNlbmQodGhpcy5lbWFpbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RhcnRPVFBUaW1lb3V0KCk7XG4gICAgICAgICAgICAgICAgICAgIFNuYWNrQ29udHJvbGxlci5zaG93U3VjY2VzcygnQ29kZSBlbWFpbCByZXNlbnQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLm9uU3RhcnRPdmVyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN0YXJ0T3ZlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgU25hY2tDb250cm9sbGVyLnNob3dFcnJvcihlcnJvcik7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXRGb290ZXJMYWJlbHMoaXNSZXNlbmREaXNhYmxlZCkge1xuICAgICAgICBpZiAodGhpcy5vblN0YXJ0T3Zlcikge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJ1NvbWV0aGluZyB3cm9uZz8nLFxuICAgICAgICAgICAgICAgIGFjdGlvbjogYFRyeSBhZ2FpbiAke2lzUmVzZW5kRGlzYWJsZWQgPyBgaW4gJHt0aGlzLnRpbWVvdXRUaW1lTGVmdH1zYCA6ICcnfWBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHRpdGxlOiBgRGlkbid0IHJlY2VpdmUgaXQ/YCxcbiAgICAgICAgICAgIGFjdGlvbjogYFJlc2VuZCAke2lzUmVzZW5kRGlzYWJsZWQgPyBgaW4gJHt0aGlzLnRpbWVvdXRUaW1lTGVmdH1zYCA6ICdDb2RlJ31gXG4gICAgICAgIH07XG4gICAgfVxufTtcblczbUVtYWlsT3RwV2lkZ2V0LnN0eWxlcyA9IHN0eWxlcztcbl9fZGVjb3JhdGUoW1xuICAgIHN0YXRlKClcbl0sIFczbUVtYWlsT3RwV2lkZ2V0LnByb3RvdHlwZSwgXCJsb2FkaW5nXCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBzdGF0ZSgpXG5dLCBXM21FbWFpbE90cFdpZGdldC5wcm90b3R5cGUsIFwidGltZW91dFRpbWVMZWZ0XCIsIHZvaWQgMCk7XG5fX2RlY29yYXRlKFtcbiAgICBzdGF0ZSgpXG5dLCBXM21FbWFpbE90cFdpZGdldC5wcm90b3R5cGUsIFwiZXJyb3JcIiwgdm9pZCAwKTtcblczbUVtYWlsT3RwV2lkZ2V0ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndzNtLWVtYWlsLW90cC13aWRnZXQnKVxuXSwgVzNtRW1haWxPdHBXaWRnZXQpO1xuZXhwb3J0IHsgVzNtRW1haWxPdHBXaWRnZXQgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENoYWluQ29udHJvbGxlciwgQ29ubmVjdGlvbkNvbnRyb2xsZXIsIENvcmVIZWxwZXJVdGlsLCBFdmVudHNDb250cm9sbGVyLCBNb2RhbENvbnRyb2xsZXIsIE9wdGlvbnNDb250cm9sbGVyIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb250cm9sbGVycyc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnQHJlb3duL2FwcGtpdC11aSc7XG5pbXBvcnQgeyBXM21FbWFpbE90cFdpZGdldCB9IGZyb20gJy4uLy4uL3V0aWxzL3czbS1lbWFpbC1vdHAtd2lkZ2V0L2luZGV4LmpzJztcbmxldCBXM21FbWFpbFZlcmlmeU90cFZpZXcgPSBjbGFzcyBXM21FbWFpbFZlcmlmeU90cFZpZXcgZXh0ZW5kcyBXM21FbWFpbE90cFdpZGdldCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyk7XG4gICAgICAgIHRoaXMub25PdHBTdWJtaXQgPSBhc3luYyAob3RwKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dGhDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRoQ29ubmVjdG9yLnByb3ZpZGVyLmNvbm5lY3RPdHAoeyBvdHAgfSk7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHsgdHlwZTogJ3RyYWNrJywgZXZlbnQ6ICdFTUFJTF9WRVJJRklDQVRJT05fQ09ERV9QQVNTJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKENoYWluQ29udHJvbGxlci5zdGF0ZS5hY3RpdmVDaGFpbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgQ29ubmVjdGlvbkNvbnRyb2xsZXIuY29ubmVjdEV4dGVybmFsKHRoaXMuYXV0aENvbm5lY3RvciwgQ2hhaW5Db250cm9sbGVyLnN0YXRlLmFjdGl2ZUNoYWluKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQWN0aXZlIGNoYWluIGlzIG5vdCBzZXQgb24gQ2hhaW5Db250cm9sbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFjaycsXG4gICAgICAgICAgICAgICAgICAgICAgICBldmVudDogJ0NPTk5FQ1RfU1VDQ0VTUycsXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzOiB7IG1ldGhvZDogJ2VtYWlsJywgbmFtZTogdGhpcy5hdXRoQ29ubmVjdG9yLm5hbWUgfHwgJ1Vua25vd24nIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghT3B0aW9uc0NvbnRyb2xsZXIuc3RhdGUuc2l3eCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgTW9kYWxDb250cm9sbGVyLmNsb3NlKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBFdmVudHNDb250cm9sbGVyLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFjaycsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnRU1BSUxfVkVSSUZJQ0FUSU9OX0NPREVfRkFJTCcsXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgbWVzc2FnZTogQ29yZUhlbHBlclV0aWwucGFyc2VFcnJvcihlcnJvcikgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uT3RwUmVzZW5kID0gYXN5bmMgKGVtYWlsKSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5hdXRoQ29ubmVjdG9yKSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRoQ29ubmVjdG9yLnByb3ZpZGVyLmNvbm5lY3RFbWFpbCh7IGVtYWlsIH0pO1xuICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHsgdHlwZTogJ3RyYWNrJywgZXZlbnQ6ICdFTUFJTF9WRVJJRklDQVRJT05fQ09ERV9TRU5UJyB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG59O1xuVzNtRW1haWxWZXJpZnlPdHBWaWV3ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndzNtLWVtYWlsLXZlcmlmeS1vdHAtdmlldycpXG5dLCBXM21FbWFpbFZlcmlmeU90cFZpZXcpO1xuZXhwb3J0IHsgVzNtRW1haWxWZXJpZnlPdHBWaWV3IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBjc3MgfSBmcm9tICdsaXQnO1xuZXhwb3J0IGRlZmF1bHQgY3NzIGBcbiAgd3VpLWljb24tYm94IHtcbiAgICBoZWlnaHQ6IHZhcigtLXd1aS1pY29uLWJveC1zaXplLXhsKTtcbiAgICB3aWR0aDogdmFyKC0td3VpLWljb24tYm94LXNpemUteGwpO1xuICB9XG5gO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9c3R5bGVzLmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IExpdEVsZW1lbnQsIGh0bWwgfSBmcm9tICdsaXQnO1xuaW1wb3J0IHsgc3RhdGUgfSBmcm9tICdsaXQvZGVjb3JhdG9ycy5qcyc7XG5pbXBvcnQgeyBDb25uZWN0b3JDb250cm9sbGVyLCBFdmVudHNDb250cm9sbGVyLCBSb3V0ZXJDb250cm9sbGVyLCBTbmFja0NvbnRyb2xsZXIgfSBmcm9tICdAcmVvd24vYXBwa2l0LWNvbnRyb2xsZXJzJztcbmltcG9ydCB7IGN1c3RvbUVsZW1lbnQgfSBmcm9tICdAcmVvd24vYXBwa2l0LXVpJztcbmltcG9ydCAnQHJlb3duL2FwcGtpdC11aS93dWktZmxleCc7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLWljb24tYm94JztcbmltcG9ydCAnQHJlb3duL2FwcGtpdC11aS93dWktbGluayc7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLXRleHQnO1xuaW1wb3J0IHN0eWxlcyBmcm9tICcuL3N0eWxlcy5qcyc7XG5sZXQgVzNtRW1haWxWZXJpZnlEZXZpY2VWaWV3ID0gY2xhc3MgVzNtRW1haWxWZXJpZnlEZXZpY2VWaWV3IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuZW1haWwgPSBSb3V0ZXJDb250cm9sbGVyLnN0YXRlLmRhdGE/LmVtYWlsO1xuICAgICAgICB0aGlzLmF1dGhDb25uZWN0b3IgPSBDb25uZWN0b3JDb250cm9sbGVyLmdldEF1dGhDb25uZWN0b3IoKTtcbiAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMubGlzdGVuRm9yRGV2aWNlQXBwcm92YWwoKTtcbiAgICB9XG4gICAgcmVuZGVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuZW1haWwpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigndzNtLWVtYWlsLXZlcmlmeS1kZXZpY2UtdmlldzogTm8gZW1haWwgcHJvdmlkZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuYXV0aENvbm5lY3Rvcikge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd3M20tZW1haWwtdmVyaWZ5LWRldmljZS12aWV3OiBObyBhdXRoIGNvbm5lY3RvciBwcm92aWRlZCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBodG1sIGBcbiAgICAgIDx3dWktZmxleFxuICAgICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgICAgYWxpZ25JdGVtcz1cImNlbnRlclwiXG4gICAgICAgIC5wYWRkaW5nPSR7Wyd4eGwnLCAncycsICd4eGwnLCAncyddfVxuICAgICAgICBnYXA9XCJsXCJcbiAgICAgID5cbiAgICAgICAgPHd1aS1pY29uLWJveFxuICAgICAgICAgIHNpemU9XCJ4bFwiXG4gICAgICAgICAgaWNvbmNvbG9yPVwiYWNjZW50LTEwMFwiXG4gICAgICAgICAgYmFja2dyb3VuZGNvbG9yPVwiYWNjZW50LTEwMFwiXG4gICAgICAgICAgaWNvbj1cInZlcmlmeVwiXG4gICAgICAgICAgYmFja2dyb3VuZD1cIm9wYXF1ZVwiXG4gICAgICAgID48L3d1aS1pY29uLWJveD5cblxuICAgICAgICA8d3VpLWZsZXggZmxleERpcmVjdGlvbj1cImNvbHVtblwiIGFsaWduSXRlbXM9XCJjZW50ZXJcIiBnYXA9XCJzXCI+XG4gICAgICAgICAgPHd1aS1mbGV4IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIiBhbGlnbkl0ZW1zPVwiY2VudGVyXCI+XG4gICAgICAgICAgICA8d3VpLXRleHQgdmFyaWFudD1cInBhcmFncmFwaC00MDBcIiBjb2xvcj1cImZnLTEwMFwiPlxuICAgICAgICAgICAgICBBcHByb3ZlIHRoZSBsb2dpbiBsaW5rIHdlIHNlbnQgdG9cbiAgICAgICAgICAgIDwvd3VpLXRleHQ+XG4gICAgICAgICAgICA8d3VpLXRleHQgdmFyaWFudD1cInBhcmFncmFwaC00MDBcIiBjb2xvcj1cImZnLTEwMFwiPjxiPiR7dGhpcy5lbWFpbH08L2I+PC93dWktdGV4dD5cbiAgICAgICAgICA8L3d1aS1mbGV4PlxuXG4gICAgICAgICAgPHd1aS10ZXh0IHZhcmlhbnQ9XCJzbWFsbC00MDBcIiBjb2xvcj1cImZnLTIwMFwiIGFsaWduPVwiY2VudGVyXCI+XG4gICAgICAgICAgICBUaGUgY29kZSBleHBpcmVzIGluIDIwIG1pbnV0ZXNcbiAgICAgICAgICA8L3d1aS10ZXh0PlxuXG4gICAgICAgICAgPHd1aS1mbGV4IGFsaWduSXRlbXM9XCJjZW50ZXJcIiBpZD1cInczbS1yZXNlbmQtc2VjdGlvblwiIGdhcD1cInhzXCI+XG4gICAgICAgICAgICA8d3VpLXRleHQgdmFyaWFudD1cInNtYWxsLTQwMFwiIGNvbG9yPVwiZmctMTAwXCIgYWxpZ249XCJjZW50ZXJcIj5cbiAgICAgICAgICAgICAgRGlkbid0IHJlY2VpdmUgaXQ/XG4gICAgICAgICAgICA8L3d1aS10ZXh0PlxuICAgICAgICAgICAgPHd1aS1saW5rIEBjbGljaz0ke3RoaXMub25SZXNlbmRDb2RlLmJpbmQodGhpcyl9IC5kaXNhYmxlZD0ke3RoaXMubG9hZGluZ30+XG4gICAgICAgICAgICAgIFJlc2VuZCBlbWFpbFxuICAgICAgICAgICAgPC93dWktbGluaz5cbiAgICAgICAgICA8L3d1aS1mbGV4PlxuICAgICAgICA8L3d1aS1mbGV4PlxuICAgICAgPC93dWktZmxleD5cbiAgICBgO1xuICAgIH1cbiAgICBhc3luYyBsaXN0ZW5Gb3JEZXZpY2VBcHByb3ZhbCgpIHtcbiAgICAgICAgaWYgKHRoaXMuYXV0aENvbm5lY3Rvcikge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmF1dGhDb25uZWN0b3IucHJvdmlkZXIuY29ubmVjdERldmljZSgpO1xuICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHsgdHlwZTogJ3RyYWNrJywgZXZlbnQ6ICdERVZJQ0VfUkVHSVNURVJFRF9GT1JfRU1BSUwnIH0pO1xuICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHsgdHlwZTogJ3RyYWNrJywgZXZlbnQ6ICdFTUFJTF9WRVJJRklDQVRJT05fQ09ERV9TRU5UJyB9KTtcbiAgICAgICAgICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnJlcGxhY2UoJ0VtYWlsVmVyaWZ5T3RwJywgeyBlbWFpbDogdGhpcy5lbWFpbCB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIFJvdXRlckNvbnRyb2xsZXIuZ29CYWNrKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgYXN5bmMgb25SZXNlbmRDb2RlKCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmxvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuYXV0aENvbm5lY3RvciB8fCAhdGhpcy5lbWFpbCkge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3czbS1lbWFpbC1sb2dpbi13aWRnZXQ6IFVuYWJsZSB0byByZXNlbmQgZW1haWwnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmF1dGhDb25uZWN0b3IucHJvdmlkZXIuY29ubmVjdEVtYWlsKHsgZW1haWw6IHRoaXMuZW1haWwgfSk7XG4gICAgICAgICAgICAgICAgdGhpcy5saXN0ZW5Gb3JEZXZpY2VBcHByb3ZhbCgpO1xuICAgICAgICAgICAgICAgIFNuYWNrQ29udHJvbGxlci5zaG93U3VjY2VzcygnQ29kZSBlbWFpbCByZXNlbnQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgIFNuYWNrQ29udHJvbGxlci5zaG93RXJyb3IoZXJyb3IpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG59O1xuVzNtRW1haWxWZXJpZnlEZXZpY2VWaWV3LnN0eWxlcyA9IHN0eWxlcztcbl9fZGVjb3JhdGUoW1xuICAgIHN0YXRlKClcbl0sIFczbUVtYWlsVmVyaWZ5RGV2aWNlVmlldy5wcm90b3R5cGUsIFwibG9hZGluZ1wiLCB2b2lkIDApO1xuVzNtRW1haWxWZXJpZnlEZXZpY2VWaWV3ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndzNtLWVtYWlsLXZlcmlmeS1kZXZpY2UtdmlldycpXG5dLCBXM21FbWFpbFZlcmlmeURldmljZVZpZXcpO1xuZXhwb3J0IHsgVzNtRW1haWxWZXJpZnlEZXZpY2VWaWV3IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJpbXBvcnQgeyBjc3MgfSBmcm9tICdsaXQnO1xuZXhwb3J0IGRlZmF1bHQgY3NzIGBcbiAgd3VpLWVtYWlsLWlucHV0IHtcbiAgICB3aWR0aDogMTAwJTtcbiAgfVxuXG4gIGZvcm0ge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgfVxuYDtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXN0eWxlcy5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBMaXRFbGVtZW50LCBodG1sIH0gZnJvbSAnbGl0JztcbmltcG9ydCB7IHN0YXRlIH0gZnJvbSAnbGl0L2RlY29yYXRvcnMuanMnO1xuaW1wb3J0IHsgY3JlYXRlUmVmLCByZWYgfSBmcm9tICdsaXQvZGlyZWN0aXZlcy9yZWYuanMnO1xuaW1wb3J0IHsgQ29ubmVjdG9yQ29udHJvbGxlciB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMnO1xuaW1wb3J0IHsgRXZlbnRzQ29udHJvbGxlciwgUm91dGVyQ29udHJvbGxlciwgU25hY2tDb250cm9sbGVyIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb250cm9sbGVycyc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnQHJlb3duL2FwcGtpdC11aSc7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLWJ1dHRvbic7XG5pbXBvcnQgJ0ByZW93bi9hcHBraXQtdWkvd3VpLWVtYWlsLWlucHV0JztcbmltcG9ydCAnQHJlb3duL2FwcGtpdC11aS93dWktZmxleCc7XG5pbXBvcnQgc3R5bGVzIGZyb20gJy4vc3R5bGVzLmpzJztcbmxldCBXM21VcGRhdGVFbWFpbFdhbGxldFZpZXcgPSBjbGFzcyBXM21VcGRhdGVFbWFpbFdhbGxldFZpZXcgZXh0ZW5kcyBMaXRFbGVtZW50IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoLi4uYXJndW1lbnRzKTtcbiAgICAgICAgdGhpcy5mb3JtUmVmID0gY3JlYXRlUmVmKCk7XG4gICAgICAgIHRoaXMuaW5pdGlhbEVtYWlsID0gUm91dGVyQ29udHJvbGxlci5zdGF0ZS5kYXRhPy5lbWFpbCA/PyAnJztcbiAgICAgICAgdGhpcy5yZWRpcmVjdFZpZXcgPSBSb3V0ZXJDb250cm9sbGVyLnN0YXRlLmRhdGE/LnJlZGlyZWN0VmlldztcbiAgICAgICAgdGhpcy5lbWFpbCA9ICcnO1xuICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTtcbiAgICB9XG4gICAgZmlyc3RVcGRhdGVkKCkge1xuICAgICAgICB0aGlzLmZvcm1SZWYudmFsdWU/LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBldmVudCA9PiB7XG4gICAgICAgICAgICBpZiAoZXZlbnQua2V5ID09PSAnRW50ZXInKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vblN1Ym1pdEVtYWlsKGV2ZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHJlbmRlcigpIHtcbiAgICAgICAgcmV0dXJuIGh0bWwgYFxuICAgICAgPHd1aS1mbGV4IGZsZXhEaXJlY3Rpb249XCJjb2x1bW5cIiBwYWRkaW5nPVwibVwiIGdhcD1cIm1cIj5cbiAgICAgICAgPGZvcm0gJHtyZWYodGhpcy5mb3JtUmVmKX0gQHN1Ym1pdD0ke3RoaXMub25TdWJtaXRFbWFpbC5iaW5kKHRoaXMpfT5cbiAgICAgICAgICA8d3VpLWVtYWlsLWlucHV0XG4gICAgICAgICAgICB2YWx1ZT0ke3RoaXMuaW5pdGlhbEVtYWlsfVxuICAgICAgICAgICAgLmRpc2FibGVkPSR7dGhpcy5sb2FkaW5nfVxuICAgICAgICAgICAgQGlucHV0Q2hhbmdlPSR7dGhpcy5vbkVtYWlsSW5wdXRDaGFuZ2UuYmluZCh0aGlzKX1cbiAgICAgICAgICA+XG4gICAgICAgICAgPC93dWktZW1haWwtaW5wdXQ+XG4gICAgICAgICAgPGlucHV0IHR5cGU9XCJzdWJtaXRcIiBoaWRkZW4gLz5cbiAgICAgICAgPC9mb3JtPlxuICAgICAgICAke3RoaXMuYnV0dG9uc1RlbXBsYXRlKCl9XG4gICAgICA8L3d1aS1mbGV4PlxuICAgIGA7XG4gICAgfVxuICAgIG9uRW1haWxJbnB1dENoYW5nZShldmVudCkge1xuICAgICAgICB0aGlzLmVtYWlsID0gZXZlbnQuZGV0YWlsO1xuICAgIH1cbiAgICBhc3luYyBvblN1Ym1pdEVtYWlsKGV2ZW50KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAodGhpcy5sb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBjb25zdCBhdXRoQ29ubmVjdG9yID0gQ29ubmVjdG9yQ29udHJvbGxlci5nZXRBdXRoQ29ubmVjdG9yKCk7XG4gICAgICAgICAgICBpZiAoIWF1dGhDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3czbS11cGRhdGUtZW1haWwtd2FsbGV0OiBBdXRoIGNvbm5lY3RvciBub3QgZm91bmQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXV0aENvbm5lY3Rvci5wcm92aWRlci51cGRhdGVFbWFpbCh7IGVtYWlsOiB0aGlzLmVtYWlsIH0pO1xuICAgICAgICAgICAgRXZlbnRzQ29udHJvbGxlci5zZW5kRXZlbnQoeyB0eXBlOiAndHJhY2snLCBldmVudDogJ0VNQUlMX0VESVQnIH0pO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlLmFjdGlvbiA9PT0gJ1ZFUklGWV9TRUNPTkRBUllfT1RQJykge1xuICAgICAgICAgICAgICAgIFJvdXRlckNvbnRyb2xsZXIucHVzaCgnVXBkYXRlRW1haWxTZWNvbmRhcnlPdHAnLCB7XG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLmluaXRpYWxFbWFpbCxcbiAgICAgICAgICAgICAgICAgICAgbmV3RW1haWw6IHRoaXMuZW1haWwsXG4gICAgICAgICAgICAgICAgICAgIHJlZGlyZWN0VmlldzogdGhpcy5yZWRpcmVjdFZpZXdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIFJvdXRlckNvbnRyb2xsZXIucHVzaCgnVXBkYXRlRW1haWxQcmltYXJ5T3RwJywge1xuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5pbml0aWFsRW1haWwsXG4gICAgICAgICAgICAgICAgICAgIG5ld0VtYWlsOiB0aGlzLmVtYWlsLFxuICAgICAgICAgICAgICAgICAgICByZWRpcmVjdFZpZXc6IHRoaXMucmVkaXJlY3RWaWV3XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBTbmFja0NvbnRyb2xsZXIuc2hvd0Vycm9yKGVycm9yKTtcbiAgICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGJ1dHRvbnNUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3Qgc2hvd1N1Ym1pdCA9ICF0aGlzLmxvYWRpbmcgJiYgdGhpcy5lbWFpbC5sZW5ndGggPiAzICYmIHRoaXMuZW1haWwgIT09IHRoaXMuaW5pdGlhbEVtYWlsO1xuICAgICAgICBpZiAoIXRoaXMucmVkaXJlY3RWaWV3KSB7XG4gICAgICAgICAgICByZXR1cm4gaHRtbCBgXG4gICAgICAgIDx3dWktYnV0dG9uXG4gICAgICAgICAgc2l6ZT1cIm1kXCJcbiAgICAgICAgICB2YXJpYW50PVwibWFpblwiXG4gICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgQGNsaWNrPSR7dGhpcy5vblN1Ym1pdEVtYWlsLmJpbmQodGhpcyl9XG4gICAgICAgICAgLmRpc2FibGVkPSR7IXNob3dTdWJtaXR9XG4gICAgICAgICAgLmxvYWRpbmc9JHt0aGlzLmxvYWRpbmd9XG4gICAgICAgID5cbiAgICAgICAgICBTYXZlXG4gICAgICAgIDwvd3VpLWJ1dHRvbj5cbiAgICAgIGA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGh0bWwgYFxuICAgICAgPHd1aS1mbGV4IGdhcD1cInNcIj5cbiAgICAgICAgPHd1aS1idXR0b24gc2l6ZT1cIm1kXCIgdmFyaWFudD1cIm5ldXRyYWxcIiBmdWxsV2lkdGggQGNsaWNrPSR7Um91dGVyQ29udHJvbGxlci5nb0JhY2t9PlxuICAgICAgICAgIENhbmNlbFxuICAgICAgICA8L3d1aS1idXR0b24+XG5cbiAgICAgICAgPHd1aS1idXR0b25cbiAgICAgICAgICBzaXplPVwibWRcIlxuICAgICAgICAgIHZhcmlhbnQ9XCJtYWluXCJcbiAgICAgICAgICBmdWxsV2lkdGhcbiAgICAgICAgICBAY2xpY2s9JHt0aGlzLm9uU3VibWl0RW1haWwuYmluZCh0aGlzKX1cbiAgICAgICAgICAuZGlzYWJsZWQ9JHshc2hvd1N1Ym1pdH1cbiAgICAgICAgICAubG9hZGluZz0ke3RoaXMubG9hZGluZ31cbiAgICAgICAgPlxuICAgICAgICAgIFNhdmVcbiAgICAgICAgPC93dWktYnV0dG9uPlxuICAgICAgPC93dWktZmxleD5cbiAgICBgO1xuICAgIH1cbn07XG5XM21VcGRhdGVFbWFpbFdhbGxldFZpZXcuc3R5bGVzID0gc3R5bGVzO1xuX19kZWNvcmF0ZShbXG4gICAgc3RhdGUoKVxuXSwgVzNtVXBkYXRlRW1haWxXYWxsZXRWaWV3LnByb3RvdHlwZSwgXCJlbWFpbFwiLCB2b2lkIDApO1xuX19kZWNvcmF0ZShbXG4gICAgc3RhdGUoKVxuXSwgVzNtVXBkYXRlRW1haWxXYWxsZXRWaWV3LnByb3RvdHlwZSwgXCJsb2FkaW5nXCIsIHZvaWQgMCk7XG5XM21VcGRhdGVFbWFpbFdhbGxldFZpZXcgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCd3M20tdXBkYXRlLWVtYWlsLXdhbGxldC12aWV3Jylcbl0sIFczbVVwZGF0ZUVtYWlsV2FsbGV0Vmlldyk7XG5leHBvcnQgeyBXM21VcGRhdGVFbWFpbFdhbGxldFZpZXcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCIsInZhciBfX2RlY29yYXRlID0gKHRoaXMgJiYgdGhpcy5fX2RlY29yYXRlKSB8fCBmdW5jdGlvbiAoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpIHtcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5kZWNvcmF0ZSA9PT0gXCJmdW5jdGlvblwiKSByID0gUmVmbGVjdC5kZWNvcmF0ZShkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYyk7XG4gICAgZWxzZSBmb3IgKHZhciBpID0gZGVjb3JhdG9ycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgaWYgKGQgPSBkZWNvcmF0b3JzW2ldKSByID0gKGMgPCAzID8gZChyKSA6IGMgPiAzID8gZCh0YXJnZXQsIGtleSwgcikgOiBkKHRhcmdldCwga2V5KSkgfHwgcjtcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xufTtcbmltcG9ydCB7IENvcmVIZWxwZXJVdGlsLCBFdmVudHNDb250cm9sbGVyLCBSb3V0ZXJDb250cm9sbGVyIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb250cm9sbGVycyc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnQHJlb3duL2FwcGtpdC11aSc7XG5pbXBvcnQgeyBXM21FbWFpbE90cFdpZGdldCB9IGZyb20gJy4uLy4uL3V0aWxzL3czbS1lbWFpbC1vdHAtd2lkZ2V0L2luZGV4LmpzJztcbmxldCBXM21VcGRhdGVFbWFpbFByaW1hcnlPdHBWaWV3ID0gY2xhc3MgVzNtVXBkYXRlRW1haWxQcmltYXJ5T3RwVmlldyBleHRlbmRzIFczbUVtYWlsT3RwV2lkZ2V0IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgc3VwZXIoKTtcbiAgICAgICAgdGhpcy5lbWFpbCA9IFJvdXRlckNvbnRyb2xsZXIuc3RhdGUuZGF0YT8uZW1haWw7XG4gICAgICAgIHRoaXMub25PdHBTdWJtaXQgPSBhc3luYyAob3RwKSA9PiB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmF1dGhDb25uZWN0b3IpIHtcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5hdXRoQ29ubmVjdG9yLnByb3ZpZGVyLnVwZGF0ZUVtYWlsUHJpbWFyeU90cCh7IG90cCB9KTtcbiAgICAgICAgICAgICAgICAgICAgRXZlbnRzQ29udHJvbGxlci5zZW5kRXZlbnQoeyB0eXBlOiAndHJhY2snLCBldmVudDogJ0VNQUlMX1ZFUklGSUNBVElPTl9DT0RFX1BBU1MnIH0pO1xuICAgICAgICAgICAgICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnJlcGxhY2UoJ1VwZGF0ZUVtYWlsU2Vjb25kYXJ5T3RwJywgUm91dGVyQ29udHJvbGxlci5zdGF0ZS5kYXRhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAgICAgICBFdmVudHNDb250cm9sbGVyLnNlbmRFdmVudCh7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICd0cmFjaycsXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50OiAnRU1BSUxfVkVSSUZJQ0FUSU9OX0NPREVfRkFJTCcsXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXM6IHsgbWVzc2FnZTogQ29yZUhlbHBlclV0aWwucGFyc2VFcnJvcihlcnJvcikgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLm9uU3RhcnRPdmVyID0gKCkgPT4ge1xuICAgICAgICAgICAgUm91dGVyQ29udHJvbGxlci5yZXBsYWNlKCdVcGRhdGVFbWFpbFdhbGxldCcsIFJvdXRlckNvbnRyb2xsZXIuc3RhdGUuZGF0YSk7XG4gICAgICAgIH07XG4gICAgfVxufTtcblczbVVwZGF0ZUVtYWlsUHJpbWFyeU90cFZpZXcgPSBfX2RlY29yYXRlKFtcbiAgICBjdXN0b21FbGVtZW50KCd3M20tdXBkYXRlLWVtYWlsLXByaW1hcnktb3RwLXZpZXcnKVxuXSwgVzNtVXBkYXRlRW1haWxQcmltYXJ5T3RwVmlldyk7XG5leHBvcnQgeyBXM21VcGRhdGVFbWFpbFByaW1hcnlPdHBWaWV3IH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5qcy5tYXAiLCJ2YXIgX19kZWNvcmF0ZSA9ICh0aGlzICYmIHRoaXMuX19kZWNvcmF0ZSkgfHwgZnVuY3Rpb24gKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XG4gICAgdmFyIGMgPSBhcmd1bWVudHMubGVuZ3RoLCByID0gYyA8IDMgPyB0YXJnZXQgOiBkZXNjID09PSBudWxsID8gZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodGFyZ2V0LCBrZXkpIDogZGVzYywgZDtcbiAgICBpZiAodHlwZW9mIFJlZmxlY3QgPT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUgPT09IFwiZnVuY3Rpb25cIikgciA9IFJlZmxlY3QuZGVjb3JhdGUoZGVjb3JhdG9ycywgdGFyZ2V0LCBrZXksIGRlc2MpO1xuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XG4gICAgcmV0dXJuIGMgPiAzICYmIHIgJiYgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwga2V5LCByKSwgcjtcbn07XG5pbXBvcnQgeyBDb3JlSGVscGVyVXRpbCwgRXZlbnRzQ29udHJvbGxlciwgUm91dGVyQ29udHJvbGxlciB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29udHJvbGxlcnMnO1xuaW1wb3J0IHsgY3VzdG9tRWxlbWVudCB9IGZyb20gJ0ByZW93bi9hcHBraXQtdWknO1xuaW1wb3J0IHsgVzNtRW1haWxPdHBXaWRnZXQgfSBmcm9tICcuLi8uLi91dGlscy93M20tZW1haWwtb3RwLXdpZGdldC9pbmRleC5qcyc7XG5sZXQgVzNtVXBkYXRlRW1haWxTZWNvbmRhcnlPdHBWaWV3ID0gY2xhc3MgVzNtVXBkYXRlRW1haWxTZWNvbmRhcnlPdHBWaWV3IGV4dGVuZHMgVzNtRW1haWxPdHBXaWRnZXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlcigpO1xuICAgICAgICB0aGlzLmVtYWlsID0gUm91dGVyQ29udHJvbGxlci5zdGF0ZS5kYXRhPy5uZXdFbWFpbDtcbiAgICAgICAgdGhpcy5yZWRpcmVjdFZpZXcgPSBSb3V0ZXJDb250cm9sbGVyLnN0YXRlLmRhdGE/LnJlZGlyZWN0VmlldztcbiAgICAgICAgdGhpcy5vbk90cFN1Ym1pdCA9IGFzeW5jIChvdHApID0+IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYXV0aENvbm5lY3Rvcikge1xuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmF1dGhDb25uZWN0b3IucHJvdmlkZXIudXBkYXRlRW1haWxTZWNvbmRhcnlPdHAoeyBvdHAgfSk7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHsgdHlwZTogJ3RyYWNrJywgZXZlbnQ6ICdFTUFJTF9WRVJJRklDQVRJT05fQ09ERV9QQVNTJyB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVkaXJlY3RWaWV3KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnJlc2V0KHRoaXMucmVkaXJlY3RWaWV3KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIEV2ZW50c0NvbnRyb2xsZXIuc2VuZEV2ZW50KHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ3RyYWNrJyxcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQ6ICdFTUFJTF9WRVJJRklDQVRJT05fQ09ERV9GQUlMJyxcbiAgICAgICAgICAgICAgICAgICAgcHJvcGVydGllczogeyBtZXNzYWdlOiBDb3JlSGVscGVyVXRpbC5wYXJzZUVycm9yKGVycm9yKSB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMub25TdGFydE92ZXIgPSAoKSA9PiB7XG4gICAgICAgICAgICBSb3V0ZXJDb250cm9sbGVyLnJlcGxhY2UoJ1VwZGF0ZUVtYWlsV2FsbGV0JywgUm91dGVyQ29udHJvbGxlci5zdGF0ZS5kYXRhKTtcbiAgICAgICAgfTtcbiAgICB9XG59O1xuVzNtVXBkYXRlRW1haWxTZWNvbmRhcnlPdHBWaWV3ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndzNtLXVwZGF0ZS1lbWFpbC1zZWNvbmRhcnktb3RwLXZpZXcnKVxuXSwgVzNtVXBkYXRlRW1haWxTZWNvbmRhcnlPdHBWaWV3KTtcbmV4cG9ydCB7IFczbVVwZGF0ZUVtYWlsU2Vjb25kYXJ5T3RwVmlldyB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwIiwidmFyIF9fZGVjb3JhdGUgPSAodGhpcyAmJiB0aGlzLl9fZGVjb3JhdGUpIHx8IGZ1bmN0aW9uIChkZWNvcmF0b3JzLCB0YXJnZXQsIGtleSwgZGVzYykge1xuICAgIHZhciBjID0gYXJndW1lbnRzLmxlbmd0aCwgciA9IGMgPCAzID8gdGFyZ2V0IDogZGVzYyA9PT0gbnVsbCA/IGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwga2V5KSA6IGRlc2MsIGQ7XG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcbiAgICBlbHNlIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSBpZiAoZCA9IGRlY29yYXRvcnNbaV0pIHIgPSAoYyA8IDMgPyBkKHIpIDogYyA+IDMgPyBkKHRhcmdldCwga2V5LCByKSA6IGQodGFyZ2V0LCBrZXkpKSB8fCByO1xuICAgIHJldHVybiBjID4gMyAmJiByICYmIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGtleSwgciksIHI7XG59O1xuaW1wb3J0IHsgTGl0RWxlbWVudCwgaHRtbCB9IGZyb20gJ2xpdCc7XG5pbXBvcnQgeyBzdGF0ZSB9IGZyb20gJ2xpdC9kZWNvcmF0b3JzLmpzJztcbmltcG9ydCB7IENvbnN0YW50c1V0aWwgYXMgQ29tbW9uQ29uc3RhbnRzVXRpbCB9IGZyb20gJ0ByZW93bi9hcHBraXQtY29tbW9uJztcbmltcG9ydCB7IENvbm5lY3RvckNvbnRyb2xsZXIsIE9wdGlvbnNDb250cm9sbGVyIH0gZnJvbSAnQHJlb3duL2FwcGtpdC1jb250cm9sbGVycyc7XG5pbXBvcnQgeyBjdXN0b21FbGVtZW50IH0gZnJvbSAnQHJlb3duL2FwcGtpdC11aSc7XG5pbXBvcnQgeyBDb25zdGFudHNVdGlsIGFzIEFwcEtpdENvbnN0YW50c1V0aWwgfSBmcm9tICdAcmVvd24vYXBwa2l0LXV0aWxzJztcbmxldCBXM21FbWFpbExvZ2luVmlldyA9IGNsYXNzIFczbUVtYWlsTG9naW5WaWV3IGV4dGVuZHMgTGl0RWxlbWVudCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKCk7XG4gICAgICAgIHRoaXMuYXV0aENvbm5lY3RvciA9IENvbm5lY3RvckNvbnRyb2xsZXIuZ2V0QXV0aENvbm5lY3RvcigpO1xuICAgICAgICB0aGlzLmlzRW1haWxFbmFibGVkID0gT3B0aW9uc0NvbnRyb2xsZXIuc3RhdGUucmVtb3RlRmVhdHVyZXM/LmVtYWlsO1xuICAgICAgICB0aGlzLmlzQXV0aEVuYWJsZWQgPSB0aGlzLmNoZWNrSWZBdXRoRW5hYmxlZChDb25uZWN0b3JDb250cm9sbGVyLnN0YXRlLmNvbm5lY3RvcnMpO1xuICAgICAgICB0aGlzLmNvbm5lY3RvcnMgPSBDb25uZWN0b3JDb250cm9sbGVyLnN0YXRlLmNvbm5lY3RvcnM7XG4gICAgICAgIENvbm5lY3RvckNvbnRyb2xsZXIuc3Vic2NyaWJlS2V5KCdjb25uZWN0b3JzJywgdmFsID0+IHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdG9ycyA9IHZhbDtcbiAgICAgICAgICAgIHRoaXMuaXNBdXRoRW5hYmxlZCA9IHRoaXMuY2hlY2tJZkF1dGhFbmFibGVkKHRoaXMuY29ubmVjdG9ycyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICByZW5kZXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc0VtYWlsRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd3M20tZW1haWwtbG9naW4tdmlldzogRW1haWwgaXMgbm90IGVuYWJsZWQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuaXNBdXRoRW5hYmxlZCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd3M20tZW1haWwtbG9naW4tdmlldzogTm8gYXV0aCBjb25uZWN0b3IgcHJvdmlkZWQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaHRtbCBgPHd1aS1mbGV4XG4gICAgICBmbGV4RGlyZWN0aW9uPVwiY29sdW1uXCJcbiAgICAgIC5wYWRkaW5nPSR7WyczeHMnLCAnbScsICdtJywgJ20nXX1cbiAgICAgIGdhcD1cImxcIlxuICAgID5cbiAgICAgIDx3M20tZW1haWwtbG9naW4td2lkZ2V0PjwvdzNtLWVtYWlsLWxvZ2luLXdpZGdldD5cbiAgICA8L3d1aS1mbGV4PiBgO1xuICAgIH1cbiAgICBjaGVja0lmQXV0aEVuYWJsZWQoY29ubmVjdG9ycykge1xuICAgICAgICBjb25zdCBuYW1lc3BhY2VzV2l0aEF1dGhDb25uZWN0b3IgPSBjb25uZWN0b3JzXG4gICAgICAgICAgICAuZmlsdGVyKGMgPT4gYy50eXBlID09PSBBcHBLaXRDb25zdGFudHNVdGlsLkNPTk5FQ1RPUl9UWVBFX0FVVEgpXG4gICAgICAgICAgICAubWFwKGkgPT4gaS5jaGFpbik7XG4gICAgICAgIGNvbnN0IGF1dGhTdXBwb3J0ZWROYW1lc3BhY2VzID0gQ29tbW9uQ29uc3RhbnRzVXRpbC5BVVRIX0NPTk5FQ1RPUl9TVVBQT1JURURfQ0hBSU5TO1xuICAgICAgICByZXR1cm4gYXV0aFN1cHBvcnRlZE5hbWVzcGFjZXMuc29tZShucyA9PiBuYW1lc3BhY2VzV2l0aEF1dGhDb25uZWN0b3IuaW5jbHVkZXMobnMpKTtcbiAgICB9XG59O1xuX19kZWNvcmF0ZShbXG4gICAgc3RhdGUoKVxuXSwgVzNtRW1haWxMb2dpblZpZXcucHJvdG90eXBlLCBcImNvbm5lY3RvcnNcIiwgdm9pZCAwKTtcblczbUVtYWlsTG9naW5WaWV3ID0gX19kZWNvcmF0ZShbXG4gICAgY3VzdG9tRWxlbWVudCgndzNtLWVtYWlsLWxvZ2luLXZpZXcnKVxuXSwgVzNtRW1haWxMb2dpblZpZXcpO1xuZXhwb3J0IHsgVzNtRW1haWxMb2dpblZpZXcgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmpzLm1hcCJdLCJuYW1lcyI6WyJzdHlsZXMkNCIsImNzcyIsIl9fZGVjb3JhdGUiLCJkZWNvcmF0b3JzIiwidGFyZ2V0Iiwia2V5IiwiZGVzYyIsImMiLCJyIiwiZCIsImkiLCJXdWlJbnB1dE51bWVyaWMiLCJMaXRFbGVtZW50IiwiaHRtbCIsInJlc2V0U3R5bGVzIiwiZWxlbWVudFN0eWxlcyIsInN0eWxlcyIsInByb3BlcnR5IiwiY3VzdG9tRWxlbWVudCIsInN0eWxlcyQzIiwiV3VpT3RwIiwiaW5kZXgiLCJpbnB1dCIsImlucHV0RWxlbWVudCIsImtleUFyciIsImN1cnJlbnRDYXJldFBvcyIsImRpciIsIm5leHRJbmRleCIsIm51bWVyaWMiLCJudW1lcmljRWxlbWVudHMiLCJfIiwiZSIsImVsZW1lbnQiLCJ2YWx1ZSIsInZhbCIsInRhcmdldEVsZW1lbnQiLCJpbnB1dFZhbHVlIiwiVWlIZWxwZXJVdGlsIiwiaW5wdXRTdHJpbmciLCJuZXh0TnVtZXJpYyIsIm5leHRJbnB1dCIsImVsIiwic3RhdGUiLCJzdHlsZXMkMiIsIk9UUF9MRU5HVEgiLCJXM21FbWFpbE90cFdpZGdldCIsIlczbUZyYW1lSGVscGVycyIsIlJvdXRlckNvbnRyb2xsZXIiLCJDb25uZWN0b3JDb250cm9sbGVyIiwiaXNSZXNlbmREaXNhYmxlZCIsImZvb3RlckxhYmVscyIsImV2ZW50IiwiZXJyb3IiLCJDb3JlSGVscGVyVXRpbCIsIlNuYWNrQ29udHJvbGxlciIsIlczbUVtYWlsVmVyaWZ5T3RwVmlldyIsIm90cCIsIkV2ZW50c0NvbnRyb2xsZXIiLCJDaGFpbkNvbnRyb2xsZXIiLCJDb25uZWN0aW9uQ29udHJvbGxlciIsIk9wdGlvbnNDb250cm9sbGVyIiwiTW9kYWxDb250cm9sbGVyIiwiZW1haWwiLCJzdHlsZXMkMSIsIlczbUVtYWlsVmVyaWZ5RGV2aWNlVmlldyIsIlczbVVwZGF0ZUVtYWlsV2FsbGV0VmlldyIsImNyZWF0ZVJlZiIsInJlZiIsImF1dGhDb25uZWN0b3IiLCJyZXNwb25zZSIsInNob3dTdWJtaXQiLCJXM21VcGRhdGVFbWFpbFByaW1hcnlPdHBWaWV3IiwiVzNtVXBkYXRlRW1haWxTZWNvbmRhcnlPdHBWaWV3IiwiVzNtRW1haWxMb2dpblZpZXciLCJjb25uZWN0b3JzIiwibmFtZXNwYWNlc1dpdGhBdXRoQ29ubmVjdG9yIiwiQXBwS2l0Q29uc3RhbnRzVXRpbCIsIkNvbW1vbkNvbnN0YW50c1V0aWwiLCJucyJdLCJtYXBwaW5ncyI6IjBhQUNBLE1BQUFBLEVBQWVDO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBO0FBQUFBLEVDRGYsSUFBSUMsRUFBMEMsU0FBVUMsRUFBWUMsRUFBUUMsRUFBS0Ms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
